=== RUN   TestReceiveMessageHandler
=== RUN   TestReceiveMessageHandler/Successful_Receive
=== RUN   TestReceiveMessageHandler/Invalid_MaxNumberOfMessages
    handlers_test.go:1093: 
        	Error Trace:	/config/kiroku-core/apps/concreteq/handlers_test.go:1093
        	Error:      	Not equal: 
        	            	expected: models.ErrorResponse{Type:"InvalidParameterValue", Message:"MaxNumberOfMessages must be between 1 and 10"}
        	            	actual  : models.ErrorResponse{Type:"InvalidParameterValue", Message:"MaxNumberOfMessages must be between 1 and 10."}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -2,3 +2,3 @@
        	            	  Type: (string) (len=21) "InvalidParameterValue",
        	            	- Message: (string) (len=44) "MaxNumberOfMessages must be between 1 and 10"
        	            	+ Message: (string) (len=45) "MaxNumberOfMessages must be between 1 and 10."
        	            	 }
        	Test:       	TestReceiveMessageHandler/Invalid_MaxNumberOfMessages
=== RUN   TestReceiveMessageHandler/Invalid_VisibilityTimeout
    handlers_test.go:1093: 
        	Error Trace:	/config/kiroku-core/apps/concreteq/handlers_test.go:1093
        	Error:      	Not equal: 
        	            	expected: models.ErrorResponse{Type:"InvalidParameterValue", Message:"VisibilityTimeout must be between 0 and 43200"}
        	            	actual  : models.ErrorResponse{Type:"InvalidParameterValue", Message:"VisibilityTimeout must be between 0 and 43200."}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -2,3 +2,3 @@
        	            	  Type: (string) (len=21) "InvalidParameterValue",
        	            	- Message: (string) (len=45) "VisibilityTimeout must be between 0 and 43200"
        	            	+ Message: (string) (len=46) "VisibilityTimeout must be between 0 and 43200."
        	            	 }
        	Test:       	TestReceiveMessageHandler/Invalid_VisibilityTimeout
=== RUN   TestReceiveMessageHandler/Invalid_ReceiveRequestAttemptId
=== RUN   TestReceiveMessageHandler/Invalid_System_Attribute_Name
--- FAIL: TestReceiveMessageHandler (0.00s)
    --- PASS: TestReceiveMessageHandler/Successful_Receive (0.00s)
    --- FAIL: TestReceiveMessageHandler/Invalid_MaxNumberOfMessages (0.00s)
    --- FAIL: TestReceiveMessageHandler/Invalid_VisibilityTimeout (0.00s)
    --- PASS: TestReceiveMessageHandler/Invalid_ReceiveRequestAttemptId (0.00s)
    --- FAIL: TestReceiveMessageHandler/Invalid_System_Attribute_Name (0.00s)
panic: 
	assert: mock: I don't know what to return because the method call was unexpected.
		Either do Mock.On("ReceiveMessage").Return(...) first, or remove the ReceiveMessage() call.
		This method was unexpected:
			ReceiveMessage(*context.valueCtx,string,*models.ReceiveMessageRequest)
			0: &context.valueCtx{Context:context.backgroundCtx{emptyCtx:context.emptyCtx{}}, key:(*chi.contextKey)(0xc09e30), val:(*chi.Context)(0xc00018bd10)}
			1: "my-queue"
			2: &models.ReceiveMessageRequest{AttributeNames:[]string(nil), MaxNumberOfMessages:(*int)(nil), MessageAttributeNames:[]string(nil), MessageSystemAttributeNames:[]string{"InvalidName"}, QueueUrl:"http://localhost:8080/queues/my-queue", ReceiveRequestAttemptId:"", VisibilityTimeout:(*int)(nil), WaitTimeSeconds:(*int)(nil)}
		at: [/config/kiroku-core/apps/concreteq/mock_store_test.go:91 /config/kiroku-core/apps/concreteq/server/server.go:342 /config/kiroku-core/apps/concreteq/server/server.go:73 /usr/lib/go-1.25/src/net/http/server.go:2322 /config/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/mux.go:478 /usr/lib/go-1.25/src/net/http/server.go:2322 /config/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/mux.go:90 /config/kiroku-core/apps/concreteq/handlers_test.go:1074] [recovered, repanicked]

goroutine 12 [running]:
testing.tRunner.func1.2({0x8316a0, 0xc0002047f0})
	/usr/lib/go-1.25/src/testing/testing.go:1872 +0x237
testing.tRunner.func1()
	/usr/lib/go-1.25/src/testing/testing.go:1875 +0x35b
panic({0x8316a0?, 0xc0002047f0?})
	/usr/lib/go-1.25/src/runtime/panic.go:783 +0x132
github.com/stretchr/testify/mock.(*Mock).fail(0xc0000e0dc0, {0x8f69f9?, 0x8?}, {0xc00020e540?, 0x3?, 0x3?})
	/config/go/pkg/mod/github.com/stretchr/testify@v1.11.1/mock/mock.go:359 +0x125
github.com/stretchr/testify/mock.(*Mock).MethodCalled(0xc0000e0dc0, {0xa0750a, 0xe}, {0xc000202bd0, 0x3, 0x3})
	/config/go/pkg/mod/github.com/stretchr/testify@v1.11.1/mock/mock.go:527 +0x77b
github.com/stretchr/testify/mock.(*Mock).Called(0xc0000e0dc0, {0xc000202bd0, 0x3, 0x3})
	/config/go/pkg/mod/github.com/stretchr/testify@v1.11.1/mock/mock.go:491 +0x125
github.com/tabeth/concreteq.(*MockStore).ReceiveMessage(0xc0000e0dc0, {0x983ae8, 0xc000202b70}, {0xc0001da94d, 0x8}, 0xc0000e4d00)
	/config/kiroku-core/apps/concreteq/mock_store_test.go:91 +0x10d
github.com/tabeth/concreteq/server.(*App).ReceiveMessageHandler(0xc000204400, {0x983508, 0xc00020e400}, 0xc0002123c0)
	/config/kiroku-core/apps/concreteq/server/server.go:342 +0x268
github.com/tabeth/concreteq/server.(*App).RootSQSHandler(0xc000204400, {0x983508, 0xc00020e400}, 0xc0002123c0)
	/config/kiroku-core/apps/concreteq/server/server.go:73 +0x3cb
net/http.HandlerFunc.ServeHTTP(0xc00018bd10?, {0x983508?, 0xc00020e400?}, 0x97c0a0?)
	/usr/lib/go-1.25/src/net/http/server.go:2322 +0x29
github.com/go-chi/chi/v5.(*Mux).routeHTTP(0xc000024d20, {0x983508, 0xc00020e400}, 0xc0002123c0)
	/config/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/mux.go:478 +0x2e2
net/http.HandlerFunc.ServeHTTP(0x983a78?, {0x983508?, 0xc00020e400?}, 0xc09e30?)
	/usr/lib/go-1.25/src/net/http/server.go:2322 +0x29
github.com/go-chi/chi/v5.(*Mux).ServeHTTP(0xc000024d20, {0x983508, 0xc00020e400}, 0xc000212280)
	/config/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/mux.go:90 +0x2ee
github.com/tabeth/concreteq.TestReceiveMessageHandler.func10(0xc0000ef500)
	/config/kiroku-core/apps/concreteq/handlers_test.go:1074 +0x315
testing.tRunner(0xc0000ef500, 0xc0000e0d20)
	/usr/lib/go-1.25/src/testing/testing.go:1934 +0xea
created by testing.(*T).Run in goroutine 7
	/usr/lib/go-1.25/src/testing/testing.go:1997 +0x465
FAIL	github.com/tabeth/concreteq	0.012s
FAIL
